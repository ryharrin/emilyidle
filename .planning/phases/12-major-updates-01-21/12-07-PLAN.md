---
phase: 12-major-updates-01-21
plan: 07
type: execute
---

<objective>
Add tutorial coachmarks and dev mode controls to improve onboarding and testing.

Purpose: Guide new players while enabling safe debugging tools for development.
Output: Coachmark UI with persistence and a dev mode panel with tests.
</objective>

<execution_context>
~/.config/opencode/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@NOTES.md
@.sisyphus/plans/notes-planned-features.md
@src/App.tsx
@src/style.css
@tests/catalog.unit.test.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add coachmarks with dismiss persistence</name>
  <files>src/App.tsx, src/style.css, tests/catalog.unit.test.tsx</files>
  <action>Add inline coachmarks for key sections (Vault, Catalog, Atelier, Maison, Prestige, Set bonuses, Crafting). Store dismissed state in the existing settings storage. Provide a dismiss control and ensure coachmarks do not reappear once dismissed. Add unit tests for visibility and persistence.</action>
  <verify>pnpm run test:unit -- --run tests/catalog.unit.test.tsx</verify>
  <done>Coachmarks render for new players and remain dismissed after user action.</done>
</task>

<task type="auto">
  <name>Task 2: Implement dev mode banner and controls</name>
  <files>src/App.tsx, src/game/state.ts, tests/catalog.unit.test.tsx</files>
  <action>Enable dev mode via URL flag (e.g., `?dev=1`). When active, show a clear banner and controls to grant Memories, unlock watches/tabs, reset save, and adjust simulation rate. Ensure controls are inert when dev mode is off. Add unit tests for activation and key actions.</action>
  <verify>pnpm run test:unit -- --run tests/catalog.unit.test.tsx</verify>
  <done>Dev mode activates via URL flag and controls modify state only when enabled.</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `pnpm run test:unit`
- [ ] Manual smoke check: coachmarks show on fresh save, dev mode banner appears with `?dev=1`
</verification>

<success_criteria>
- Coachmarks provide guided context and persist dismissal state
- Dev mode banner + controls work only when enabled
  </success_criteria>

<output>
After completion, create `.planning/phases/12-major-updates-01-21/12-07-SUMMARY.md`:

# Phase 12 Plan 07 Summary

**Added coachmarks and dev mode tooling.**

## Accomplishments
- [ ] ...

## Files Created/Modified
- `src/App.tsx` - ...
- `src/style.css` - ...
- `src/game/state.ts` - ...
- `tests/catalog.unit.test.tsx` - ...

## Decisions Made
- None

## Issues Encountered
- None

## Next Step
- Ready for 12-08-PLAN.md
</output>
