---
phase: 12-major-updates-01-21
plan: 06
type: execute
---

<objective>
Integrate crafting into the UI with dismantle and recipe workflows.

Purpose: Make the new crafting mechanics accessible through the game interface.
Output: Crafting UI, user interactions, and test coverage.
</objective>

<execution_context>
~/.config/opencode/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@NOTES.md
@.sisyphus/plans/notes-planned-features.md
@src/App.tsx
@src/game/state.ts
@src/style.css
@tests/catalog.unit.test.tsx
@tests/collection-loop.spec.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add crafting UI panel and interactions</name>
  <files>src/App.tsx, src/style.css</files>
  <action>Add a Crafting section in the Atelier/Workshop area with parts totals, recipe list, and dismantle controls. Wire buttons to the crafting helpers added in 12-05. Keep selectors stable and add new `data-testid` hooks for tests.</action>
  <verify>pnpm run test:unit -- --run tests/catalog.unit.test.tsx</verify>
  <done>Crafting UI renders, buttons are enabled/disabled correctly, and state updates on user actions.</done>
</task>

<task type="auto">
  <name>Task 2: Cover crafting UI in tests</name>
  <files>tests/catalog.unit.test.tsx, tests/collection-loop.spec.ts</files>
  <action>Add unit tests for crafting UI state and one e2e flow that dismantles a watch into parts and crafts a recipe. Reuse localStorage seeding helpers and avoid brittle selectors.</action>
  <verify>pnpm run test:unit && pnpm run test:e2e -- --project=chromium --grep "craft"</verify>
  <done>Unit and e2e coverage confirms crafting UI interactions work end-to-end.</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `pnpm run test:unit`
- [ ] `pnpm run test:e2e`
</verification>

<success_criteria>
- Crafting UI is accessible from the Atelier/Workshop area
- Dismantle and craft actions update state and UI correctly
- Tests cover the core crafting flow
  </success_criteria>

<output>
After completion, create `.planning/phases/12-major-updates-01-21/12-06-SUMMARY.md`:

# Phase 12 Plan 06 Summary

**Integrated crafting into the UI with test coverage.**

## Accomplishments
- [ ] ...

## Files Created/Modified
- `src/App.tsx` - ...
- `src/style.css` - ...
- `tests/catalog.unit.test.tsx` - ...
- `tests/collection-loop.spec.ts` - ...

## Decisions Made
- None

## Issues Encountered
- None

## Next Step
- Ready for 12-07-PLAN.md
</output>
