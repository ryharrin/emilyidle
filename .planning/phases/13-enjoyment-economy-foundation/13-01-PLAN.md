---
phase: 13-enjoyment-economy-foundation
type: execute
---

<objective>
Define enjoyment tiers so watch types drive enjoyment income.

Purpose: Shift enjoyment from a collection-value proxy to a tiered per-watch rate that reflects quartz/mechanical/complication progression.
Output: Updated enjoyment rate logic in game state plus unit coverage for tier behavior.
</objective>

<execution_context>
~/.config/opencode/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Relevant recent decisions and patterns
@.planning/phases/12-major-updates-01-21/12-09-SUMMARY.md
@.planning/phases/12-major-updates-01-21/12-08-SUMMARY.md

# Core domain logic
@src/game/state.ts
@src/game/sim.ts

# Existing unit coverage (prestige + rates)
@tests/maison.unit.test.tsx

**Tech stack available:** TypeScript, Vitest, React (client-only)
**Established patterns:** Prestige legacy multiplier applies to both cash and enjoyment rates; state transitions are pure
**Constraining decisions:** Keep save version and localStorage keys unchanged; keep ID/test selectors stable
**Issues being addressed:** None
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add enjoyment tier metadata and rate calculation</name>
  <files>src/game/state.ts</files>
  <action>
    Extend watch item definitions with an explicit enjoyment tier or per-item enjoyment rate (quartz/mechanical/complication).
    Replace the collection-value-based `getEnjoymentRateCentsPerSec` with a tiered per-watch calculation: quartz yields a
    small base rate, mechanical higher, complications highest. Keep prestige legacy multiplier applied to the final rate.
    Add a helper for per-item enjoyment rate so UI can display it. Do not change save version, localStorage keys, or
    cash income rate logic.
  </action>
  <verify>
    Run `pnpm run test:unit -- tests/maison.unit.test.tsx` and ensure existing prestige multiplier assertions still pass.
  </verify>
  <done>
    Enjoyment rate is derived from watch tier metadata, uses prestige legacy multiplier, and cash income logic remains unchanged.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add unit coverage for enjoyment tiers</name>
  <files>tests/enjoyment.unit.test.tsx</files>
  <action>
    Create a new unit test file that seeds GameState with quartz, mechanical, and complication watches to verify enjoyment
    rates increase by tier. Include a case proving the per-item enjoyment helper returns higher values for complications
    than mechanical and quartz. Use existing testing patterns from `tests/maison.unit.test.tsx`.
  </action>
  <verify>Run `pnpm run test:unit -- tests/enjoyment.unit.test.tsx`.</verify>
  <done>Tests prove enjoyment tier ordering and pass consistently.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `pnpm run test:unit -- tests/enjoyment.unit.test.tsx`
- [ ] `pnpm run test:unit -- tests/maison.unit.test.tsx`
</verification>

<success_criteria>

- Enjoyment rate is tier-driven (quartz < mechanical < complication) and uses prestige legacy multiplier
- Unit tests validate tier ordering and pass
- Cash income calculation remains unchanged
  </success_criteria>

<output>
After completion, create `.planning/phases/13-enjoyment-economy-foundation/13-01-SUMMARY.md`:

# Phase 13 Plan 01 Summary

**[One-liner describing the enjoyment tier shift]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `src/game/state.ts` - [Description]
- `tests/enjoyment.unit.test.tsx` - [Description]

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 13-02-PLAN.md
</output>
