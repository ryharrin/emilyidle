---
phase: 18-codebase-refactor
plan: 6
type: execute
wave: 5
depends_on: ["18-03", "18-04", "18-05"]
files_modified:
  - AGENTS.md
  - src/AGENTS.md
  - src/game/AGENTS.md
  - tests/AGENTS.md
autonomous: true

must_haves:
  truths:
    - "Internal docs describe the new module boundaries (UI vs runtime vs domain)"
  artifacts:
    - path: "AGENTS.md"
      provides: "Top-level repo guidance aligned with new structure"
    - path: "src/game/AGENTS.md"
      provides: "Game module layout guidance (model/data/selectors/actions/runtime)"
    - path: "src/AGENTS.md"
      provides: "UI structure guidance (src/ui/*)"
  key_links:
    - from: "AGENTS.md"
      to: "src/ui"
      via: "documentation reference"
      pattern: "src/ui"
    - from: "src/game/AGENTS.md"
      to: "src/game/model"
      via: "documentation reference"
      pattern: "src/game/model"
---

<objective>
Update internal docs to match the new module boundaries introduced in Phase 18.

Purpose: Make the new module boundaries maintainable with clear documentation.
Output: Updated docs aligned with Phase 18's new structure.
</objective>

<execution_context>
@~/.opencode/get-shit-done/workflows/execute-plan.md
@~/.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@.planning/phases/18-codebase-refactor/18-CONTEXT.md
@.planning/phases/18-codebase-refactor/18-RESEARCH.md

@AGENTS.md
@src/AGENTS.md
@src/game/AGENTS.md
@tests/AGENTS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update internal AGENTS docs to reflect the new structure</name>
  <files>
AGENTS.md
src/AGENTS.md
src/game/AGENTS.md
tests/AGENTS.md
  </files>
  <action>
- Update these docs to match the new layout:
  - `src/ui/tabs/*` owns tabpanel rendering.
  - `src/game/runtime/*` owns RAF/autosave/lifecycle side effects.
  - `src/game/model/*` defines GameState and state construction.
  - `src/game/data/*`, `src/game/selectors/*`, `src/game/actions/*` contain game rules.
- Keep guidance focused on “where to put code” and key invariants (selectors purity, persistence contract, test selector stability).
  </action>
  <verify>pnpm run typecheck</verify>
  <done>
- Docs explicitly mention the new directories and constraints.
- `pnpm run typecheck` still succeeds after any doc-linked import path updates.
  </done>
</task>

</tasks>

<verification>
- `pnpm run typecheck`
</verification>

<success_criteria>
- Internal docs document the module boundaries: UI tabs, runtime orchestration, domain model/data/selectors/actions.
- `pnpm run typecheck` succeeds after documentation updates.
</success_criteria>

<output>
After completion, create `.planning/phases/18-codebase-refactor/18-06-SUMMARY.md`
</output>
